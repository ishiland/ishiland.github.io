/*  ConfigurableMapViewerCMV
 *  version 2.0.0-beta.2
 *  Project: https://cmv.io/
 */

define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dojo/query","./_SymEditorBase","./SymColorPicker","./StylePicker","./NumericSlider"],function(t,i,l,e,o,s,r,n){return t(o,{constructor:function(t){(t=t||{}).symbol||(t.symbol=this.advancedDrawConfig.defaultPointSymbol),i.mixin(this,t),this.initialized=!1,this.editorLabel=this.i18n.widgets.smsEditor.defaultEditorLabel,this.leftHandControlsLabel=this.i18n.widgets.smsEditor.leftHandControlsLabel,this.rightHandControlsLabel=this.i18n.widgets.smsEditor.rightHandControlsLabel,this._set("symbol",this.symbol)},postCreate:function(){this.inherited(arguments),this._initSymbolStylePicker(),this._initSymbolColorPicker(),this._initSymbolSizeSlider(),this._initOutlineStylePicker(),this._initOutlineColorPicker(),this._initOutlineWidthSlider(),this.initialized=!0},_initSymbolStylePicker:function(){this.symbolStylePicker=new r({style:this.symbol.style,baseClass:"symbolEditorControl",label:this.i18n.widgets.symbolStylePicker.label,styleSet:"marker"},this.createLeftHandControlsDiv()),this.symbolStylePicker.watch("style",i.hitch(this,function(){this._updateSymbolAtt(),this._symbolStyleHasFill(arguments[2])?this._toggleSymbolColorControl(!0):this._toggleSymbolColorControl(!1)})),this.symbolStylePicker.startup()},_toggleSymbolColorControl:function(t){var i=t?"block":"none";l.set(this.symbolColorPicker.domNode,"display",i)},_symbolStyleHasFill:function(t){return"esriSMSCross"!==t&&"esriSMSX"!==t},_initSymbolColorPicker:function(){this.symbolColorPicker=new s({color:this.symbol.color,baseClass:"symbolEditorControl",buttonLabel:this.i18n.widgets.symbolColorPicker.buttonLabel,sliderLabel:this.i18n.widgets.symbolColorPicker.sliderLabel,colorPickerOptions:this.colorPickerOptions},this.createLeftHandControlsDiv()),this.symbolColorPicker.watch("color",i.hitch(this,function(){this._updateSymbolAtt()})),this.symbolColorPicker.startup()},_initSymbolSizeSlider:function(){this.symbolSizeSlider=new n({value:this.symbol.size,minimum:1,maximum:100,label:this.i18n.widgets.symbolSizePicker.label+" ("+this.symbol.size+")",baseClass:"symbolEditorControl"},this.createLeftHandControlsDiv()),this.symbolSizeSlider.watch("value",i.hitch(this,function(){this.symbolSizeSlider.value=Math.round(10*this.symbolSizeSlider.value)/10,e("label",this.symbolSizeSlider.domNode)[0].innerHTML=this.i18n.widgets.symbolSizePicker.label+" ("+this.symbol.size+")",this._updateSymbolAtt()})),this.symbolSizeSlider.startup()},_initOutlineStylePicker:function(){this.outlineStylePicker=new r({lineStyle:this.symbol.outline.style,baseClass:"symbolEditorControl",label:this.i18n.widgets.symbolStylePicker.label,styleSet:"line"},this.createRightHandControlsDiv()),this.outlineStylePicker.watch("style",i.hitch(this,function(){this._updateSymbolAtt(),"esriSLSNull"===arguments[2]?this._toggleOutlineControlsDisplay(!1):this._toggleOutlineControlsDisplay(!0)})),this.outlineStylePicker.startup()},_toggleOutlineControlsDisplay:function(t){var i=t?"block":"none";l.set(this.outlineColorPicker.domNode,"display",i),l.set(this.outlineWidthSlider.domNode,"display",i)},_initOutlineColorPicker:function(){this.outlineColorPicker=new s({color:this.symbol.outline.color,baseClass:"symbolEditorControl",buttonLabel:this.i18n.widgets.symbolColorPicker.buttonLabel,sliderLabel:this.i18n.widgets.symbolColorPicker.sliderLabel,colorPickerOptions:this.colorPickerOptions},this.createRightHandControlsDiv()),this.outlineColorPicker.watch("color",i.hitch(this,function(){this._updateSymbolAtt()})),this.outlineColorPicker.startup()},_initOutlineWidthSlider:function(){this.outlineWidthSlider=new n({value:this.symbol.outline.width,minimum:1,maximum:10,baseClass:"symbolEditorControl",label:this.i18n.widgets.symbolWidthPicker.label+" ("+this.symbol.outline.width+")"},this.createRightHandControlsDiv()),this.outlineWidthSlider.watch("value",i.hitch(this,function(){this.outlineWidthSlider.value=Math.round(10*this.outlineWidthSlider.value)/10,e("label",this.outlineWidthSlider.domNode)[0].innerHTML=this.i18n.widgets.symbolWidthPicker.label+" ("+this.symbol.outline.width+")",this._updateSymbolAtt()})),this.outlineWidthSlider.startup()},_updateSymbolAtt:function(){if(this.initialized){var t=this._getSymbol();this._set("symbol",t)}},_getSymbol:function(){var t=i.clone(this.symbol);return t.style=this.symbolStylePicker.get("style"),t.color=this.symbolColorPicker.get("color"),t.size=this.symbolSizeSlider.get("value"),t.outline.style=this.outlineStylePicker.get("style"),t.outline.color=this.outlineColorPicker.get("color"),t.outline.width=this.outlineWidthSlider.get("value"),t},_getSymbolAttr:function(){return this._getSymbol()},_setSymbolAttr:function(t){this.initialized&&(this.symbolColorPicker.set("color",t.color),this.symbolSizeSlider.set("value",t.size),this.symbolStylePicker.set("style",t.style),this.outlineColorPicker.set("color",t.outline.color),this.outlineWidthSlider.set("value",t.outline.width),this.outlineStylePicker.set("style",t.outline.style)),this.symbol=t}})});
//# sourceMappingURL=SMSEditor.js.map