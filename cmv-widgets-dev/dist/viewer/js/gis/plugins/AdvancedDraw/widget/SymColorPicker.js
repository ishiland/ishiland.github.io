/*  ConfigurableMapViewerCMV
 *  version 2.0.0-beta.2
 *  Project: https://cmv.io/
 */

define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/dom-style","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/popup","dijit/ColorPalette","dojox/widget/ColorPicker","dojo/text!./templates/SymColorPicker.html","dojo/i18n!../nls/resource","./_ColorMixin","dijit/form/DropDownButton","dijit/form/HorizontalSlider","dijit/TooltipDialog","xstyle/css!dojox/widget/ColorPicker/ColorPicker.css","xstyle/css!./css/SymColorPicker.css"],function(o,t,e,i,r,l,a,s,c,n,h,d,p){return o([r,l,a,p],{widgetsInTemplate:!0,templateString:h,defaultColor:[255,0,0,255],color:null,alpha:1,i18n:d,baseClass:"colorPicker",label:"Color and alpha:",buttonLabel:"Marker color",sliderLabel:"Marker transparency",colorPickerOptions:{type:"advanced",simple:{paletteSize:"7x10"},closeOnChange:!1},constructor:function(o){o=o||{color:this.defaultColor},this._validateColor(o.color),t.mixin(this,o)},_validateColor:function(o){if(!(o instanceof Array))throw new Error("color is not an ESRI color array")},postCreate:function(){this.inherited(arguments),"simple"===this.colorPickerOptions.type?this.colorPickerDijit=this._getSimpleColorPicker(this.colorPickerOptions.simple.paletteSize):this.colorPickerDijit=this._getAdvancedColorPicker(),this.colorPickerDijit.on("change",t.hitch(this,"_onColorPickerChange"))},_getSimpleColorPicker:function(o){return new c({palette:o},this.colorPickerNode)},_getAdvancedColorPicker:function(){return new n({},this.colorPickerNode)},startup:function(){var o=this.color;this.inherited(arguments),this.color=o,this.colorPickerDijit.startup()},_updateControls:function(o){this.colorPickerDijit&&o&&this.colorPickerDijit.set("value",o.toHex()),this.alphaSlider&&this.alphaSlider.set("value",o.a),this._updateColorSwatch(o.toHex())},_setColorAttr:function(o){o=this._esriColorArrayToDojoColor(o),this._updateControls(o),this.color=o},_getColorAttr:function(){return this._dojoColorToEsriColorArray(this.color)},_onAlphaSliderChange:function(o){this.alphaSlider.value=Math.round(100*this.alphaSlider.value)/100,dojo.query("label",this.domNode)[0].innerHTML=this.sliderLabel+" ("+this.alphaSlider.value+")";var i=t.clone(this.color);i.a=o,this._set("color",i)},_onColorPickerChange:function(o){var i=e.fromHex(o);i.a=this._getAlphaValue(),this._updateColorSwatch(i.toHex()),this._set("color",i),this.colorPickerOptions.closeOnChange&&this.closeColorPickerPopup()},_getAlphaValue:function(){var o=1;return this.alphaSlider&&(o=this.alphaSlider.get("value")),o},_updateColorSwatch:function(o){this.colorSwatchNode&&i.set(this.colorSwatchNode,"backgroundColor",o)},closeColorPickerPopup:function(){s.close(this.colorPickerTooltipDialog)}})});
//# sourceMappingURL=SymColorPicker.js.map