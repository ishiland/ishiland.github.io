/*  ConfigurableMapViewerCMV
 *  version 2.0.0-beta.2
 *  Project: https://cmv.io/
 */

define(["dojo/_base/declare","dijit/_WidgetBase","esri/dijit/Measurement","dojo/aspect","dojo/_base/lang","dojo/dom-construct","dojo/topic"],function(e,t,i,s,a,o,c){return e([t],{declaredClass:"gis.dijit.Measurement",mapClickMode:null,postCreate:function(){this.inherited(arguments),this.measure=new i({map:this.map,defaultAreaUnit:this.defaultAreaUnit,defaultLengthUnit:this.defaultLengthUnit},o.create("div")).placeAt(this.domNode),this.measure.startup(),s.after(this.measure,"setTool",a.hitch(this,"checkMeasureTool")),s.after(this.measure,"closeTool",a.hitch(this,"checkMeasureTool")),this.own(c.subscribe("mapClickMode/currentSet",a.hitch(this,"setMapClickMode"))),this.parentWidget&&this.parentWidget.toggleable&&this.own(s.after(this.parentWidget,"toggle",a.hitch(this,function(){this.onLayoutChange(this.parentWidget.open)})))},checkMeasureTool:function(){this.measure.activeTool&&""!==this.measure.activeTool?"measure"!==this.mapClickMode&&this.disconnectMapClick():"measure"===this.mapClickMode&&this.connectMapClick()},disconnectMapClick:function(){c.publish("mapClickMode/setCurrent","measure")},connectMapClick:function(){c.publish("mapClickMode/setDefault")},onLayoutChange:function(e){e||"measure"!==this.mapClickMode||this.connectMapClick()},setMapClickMode:function(e){"measure"!==(this.mapClickMode=e)&&(this.measure.setTool("area",!1),this.measure.setTool("distance",!1),this.measure.setTool("location",!1),this.measure.clearResult())}})});
//# sourceMappingURL=Measurement.js.map