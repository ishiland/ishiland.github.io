{"version":3,"sources":["legendUtil.js"],"names":["define","array","lang","has","topic","domConst","domClass","domStyle","html","registry","gfx","esriRequest","Legend","esriBundle","i18n","widgets","legend","NLS_noLegend","noLegend","isLegend","controlOptions","controller","_legendRequest","layer","expandNode","callback","errback","content","f","token","_getToken","options","disableIdentityLookup","usePost","useProxy","layerDrawingOptions","length","dynamicLayers","this","_createDynamicLayerParameter","url","callbackParamName","then","hitch","_arcgisLegendRequest","index","toLowerCase","indexOf","soap","substring","window","escape","_image","layerId","src","imageData","img","create","class","id","set","width","height","opacity","layerLegend","map","getMap","layerInfos","setTimeout","startup","dynamicSublayerLegend","version","_createDynamicSublayerLegend","r","forEach","layers","_layer","table","add","row","symbol","innerHTML","label","place","reduce","prior","curr","sublayerExpandNode","byId","_dynamicSublayerLegendError","e","publish","source","error","_surfaceDims","vectorLegend","renderer","infos","_createVectorLegend","description","value","info","sym","descriptor","getShapeDescriptors","ds","defaultShape","fill","stroke","w","h","surfaceNode","display","shape","createSurface","createShape","setFill","setStroke","applyTransform","dx","dy","dynamicLayerInfos","createDynamicLayerInfosFromLayerInfos","dlis","param","dli","subLayerIds","i","name","toJson","drawingInfo","push","JSON","stringify"],"mappings":"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","file":"legendUtil.js"}